# This file was generated by GoReleaser. DO NOT EDIT.
cask "xmtpd-cli" do
  name "xmtpd-cli"
  desc "CLI to manage the XMTP Network."
  homepage "https://github.com/xmtp/xmtpd"
  version "0.5.0"

  livecheck do
    skip "Auto-generated on release."
  end

  binary "xmtpd-cli"
  bash_completion "completions/xmtpd-cli.bash"
  zsh_completion "completions/_xmtpd-cli"
  fish_completion "completions/xmtpd-cli.fish"

  on_macos do
    on_intel do
      url "https://github.com/xmtp/xmtpd/releases/download/v#{version}/xmtpd-cli_v#{version}_darwin_amd64.zip"
      sha256 "d46f5930bb176abfdccde0457891bb5914227d779f44af5ea60a42ce8bf2b794"
    end
    on_arm do
      url "https://github.com/xmtp/xmtpd/releases/download/v#{version}/xmtpd-cli_v#{version}_darwin_arm64.zip"
      sha256 "b36112a337fad061378e7d585238c77ee8ed894726516db414f9f8aef80a9186"
    end
  end

  on_linux do
    on_intel do
      url "https://github.com/xmtp/xmtpd/releases/download/v#{version}/xmtpd-cli_v#{version}_linux_amd64.zip"
      sha256 "2b6bc3d1a7fd7d458964f75a12b8ae1dac1641fe31077d20cc460409028f85c9"
    end
    on_arm do
      url "https://github.com/xmtp/xmtpd/releases/download/v#{version}/xmtpd-cli_v#{version}_linux_arm64.zip"
      sha256 "bb577b630b1d709d926bb5ad02f02a4443051b0e2eb340e9f842ec7489cdd788"
    end
  end

  postflight do
    if OS.mac?
      system_command "/usr/bin/xattr", args: ["-dr", "com.apple.quarantine", "#{staged_path}/xmtpd-cli"]
    end
  end

  caveats do
    "xmtpd-cli is not notarized. The installer removes the macOS quarantine attribute."
    "Prefer signed/notarized builds when available."
  end

  # No zap stanza required
end
